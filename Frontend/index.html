<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DEFENCE-AI | Tactical Risk Intelligence</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,Segoe UI,Arial,sans-serif;
  background:#05070c;
  color:#e8ebf0;
}

/* ---------- Layout ---------- */
.section{display:none;min-height:100vh;padding:80px 30px}
.section.active{display:block;animation:fade .7s ease}
@keyframes fade{from{opacity:0;transform:translateY(25px)}to{opacity:1}}

.panel{
  max-width:1100px;
  margin:auto;
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.15);
  border-radius:22px;
  padding:50px;
  backdrop-filter:blur(18px);
}

button{
  padding:16px 36px;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,#cfff00,#7bff00);
  font-weight:700;
  cursor:pointer;
  box-shadow:0 0 30px rgba(180,255,0,.35);
}
button:hover{transform:translateY(-2px)}

h1{font-size:64px;letter-spacing:4px}
h2{font-size:28px;margin-bottom:20px}
.subtitle{color:#9aa4b2;font-size:18px}

/* ---------- Table ---------- */
table{width:100%;border-collapse:collapse;margin-top:30px}
th,td{padding:14px;border-bottom:1px solid rgba(255,255,255,.15)}
th{color:#9aa4b2;text-align:left}

/* ---------- Form ---------- */
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:20px;margin-top:30px}
input{
  padding:16px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(0,0,0,.5);
  color:#fff
}

/* ---------- Result ---------- */
.high{color:#ff4d4d}
.medium{color:#ffb020}
.low{color:#8cff00}
.big{font-size:56px;margin:30px 0}

/* ---------- Footer ---------- */
.footer{text-align:center;color:#8b95a5;margin-top:40px;font-size:13px}
</style>
</head>

<body>

<!-- ================= HERO ================= -->
<section id="hero" class="section active">
<div class="panel" style="text-align:center">
<h1>DEFENCE<span style="color:#cfff00">-AI</span></h1>
<p class="subtitle">
Operational Intelligence System for Soldier Health & Mission Readiness
</p>
<button onclick="go('norms')">ENTER COMMAND SYSTEM</button>
</div>
</section>

<!-- ================= NORMS ================= -->
<section id="norms" class="section">
<div class="panel">
<h2>üìä Physiological Reference Standards</h2>

<table>
<tr><th>Metric</th><th>Normal</th><th>Warning</th><th>Critical</th></tr>
<tr><td>Heart Rate</td><td>60‚Äì100</td><td>100‚Äì130</td><td>130+</td></tr>
<tr><td>Stress Level</td><td>0‚Äì3</td><td>4‚Äì6</td><td>7‚Äì10</td></tr>
<tr><td>Sleep</td><td>7‚Äì9 hrs</td><td>5‚Äì6</td><td>&lt;5</td></tr>
<tr><td>Fatigue</td><td>0‚Äì3</td><td>4‚Äì6</td><td>7‚Äì10</td></tr>
<tr><td>Blood Pressure</td><td>5‚Äì6</td><td>7‚Äì8</td><td>9+</td></tr>
<tr><td>Oxygen</td><td>95‚Äì100%</td><td>90‚Äì94%</td><td>&lt;90%</td></tr>
<tr><td>Daily Steps</td><td>8000+</td><td>4000‚Äì8000</td><td>&lt;4000</td></tr>
</table>

<button onclick="go('form')">Proceed to Assessment</button>
</div>
</section>

<!-- ================= FORM ================= -->
<section id="form" class="section">
<div class="panel">
<h2>üß™ Soldier Data Intake</h2>

<div class="grid">
<input id="heartRate" placeholder="Heart Rate">
<input id="stress" placeholder="Stress Level">
<input id="sleep" placeholder="Sleep Hours">
<input id="fatigue" placeholder="Fatigue Level">
<input id="age" placeholder="Age">
<input id="bp" placeholder="Blood Pressure">
<input id="oxygen" placeholder="Oxygen Level">
<input id="steps" placeholder="Daily Steps">
</div>

<button onclick="analyze()">Initiate AI Analysis</button>
</div>
</section>

<!-- ================= PROCESS ================= -->
<section id="process" class="section">
<div class="panel" style="text-align:center;font-size:22px">
‚öôÔ∏è AI ENGINE ANALYZING MULTI-DIMENSIONAL DATA STREAMS‚Ä¶
</div>
</section>

<!-- ================= RESULT ================= -->
<section id="result" class="section">
<div class="panel" style="text-align:center">
<h2>üìà Operational Risk Assessment</h2>
<div id="output"></div>
<button onclick="generateLetter()">View Command Decision</button>
</div>
</section>

<!-- ================= LETTER ================= -->
<section id="letter" class="section">
<div class="panel">
<h2>üìú Command Decision Letter</h2>
<div id="letterContent" style="line-height:1.8;margin-top:25px"></div>

<div style="margin-top:30px">
<button onclick="downloadReport()">Download Mission Report</button>
<button onclick="go('thankyou')">Continue</button>
</div>
</div>
</section>

<!-- ================= THANK YOU ================= -->
<section id="thankyou" class="section">
<div class="panel" style="text-align:center">
<h2>üôè Thank You</h2>
<p class="subtitle">
This assessment cycle has been successfully completed.<br>
Defence-AI exists to enhance soldier safety, readiness, and mission success.
</p>

<button onclick="go('hero')">Start New Assessment</button>
</div>

<div class="footer">
¬© DEFENCE-AI ‚Ä¢ Tactical Intelligence Platform
</div>
</section>

<script>
let latest=null;

function go(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

async function analyze(){
  go('process');
  setTimeout(async()=>{
    const payload={
      age:+age.value,
      heart_rate:+heartRate.value,
      stress_level:+stress.value,
      sleep_hours:+sleep.value,
      fatigue_level:+fatigue.value,
      blood_pressure:+bp.value,
      oxygen_level:+oxygen.value,
      daily_steps:+steps.value
    };

    const r=await fetch("http://127.0.0.1:8000/predict",{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify(payload)
    });

    latest=await r.json();
    let c=latest.risk_level==="HIGH"?"high":latest.risk_level==="MEDIUM"?"medium":"low";

    output.innerHTML=`
      <div class="big ${c}">${latest.risk_level}</div>
      <div>Risk Score: ${latest.risk_score}</div>
    `;
    go('result');
  },1600);
}

function generateLetter(){
  let text="";
  if(latest.risk_level==="LOW"){
    text=`
    <b>Mission Clearance Approval</b><br><br>
    The soldier has been assessed as <b>LOW RISK</b> and is deemed fully fit
    for mission deployment. Command appreciates the soldier‚Äôs preparedness,
    discipline, and resilience.<br><br>
    <b>Status:</b> ‚úÖ APPROVED FOR MISSION
    `;
  }else{
    text=`
    <b>Health & Recovery Advisory</b><br><br>
    Defence-AI has detected elevated physiological risk indicators
    (<b>${latest.risk_level} RISK</b>). Temporary non-deployment is advised
    in the interest of soldier safety and mission success.<br><br>
    <b>Status:</b> ‚ö†Ô∏è NOT CLEARED FOR DEPLOYMENT
    `;
  }
  letterContent.innerHTML=text;
  go('letter');
}

function downloadReport(){
  const txt=`DEFENCE-AI MISSION REPORT

Risk Level: ${latest.risk_level}
Risk Score: ${latest.risk_score}

Generated by Defence-AI Tactical Intelligence System`;
  const blob=new Blob([txt],{type:"text/plain"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="Defence_AI_Mission_Report.txt";
  a.click();
}
</script>

</body>
</html>
